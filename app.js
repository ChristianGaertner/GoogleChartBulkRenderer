// Generated by CoffeeScript 1.6.3
var injectjQuery, page, replaceData;

page = require('webpage').create();

injectjQuery = function() {
  page.injectJs('./jquery.js');
  return page.evaluate(function() {
    return jQuery.noConflict();
  });
};

replaceData = function(data) {
  return page.evaluate(function(s) {
    return drawChart(s);
  }, data);
};

page.onLoadFinished = function(status) {
  var x;
  if (status === 'success') {
    x = 1;
    injectjQuery();
    replaceData([['Label', 'Value'], ['Other', x], ['Foo', x], ['Waa', x]]);
    page.render('render/img' + x + '.png');
    return phantom.exit();
  } else {
    console.log('Connection failed.');
    return phantom.exit();
  }
};

page.onConsoleMessage = function(msg) {
  return console.log(msg);
};

page.open('chart.html');
