// Generated by CoffeeScript 1.6.3
var injectjQuery, page, replaceData;

page = require('webpage').create();

injectjQuery = function() {
  page.injectJs('./jquery.js');
  return page.evaluate(function() {
    return jQuery.noConflict();
  });
};

replaceData = function(data) {
  console.log(data);
  return page.evaluate(function() {
    window.rawData = data;
    return drawChart();
  });
};

page.onLoadFinished = function(status) {
  var x, _i;
  if (status === 'success') {
    injectjQuery();
    for (x = _i = 0; _i <= 3; x = _i += 1) {
      replaceData([['Label', 'Value'], ['Other', x], ['Boo', x], ['Waa', x]]);
      page.render('render/img' + x + '.png');
    }
    return phantom.exit();
  } else {
    console.log('Connection failed.');
    return phantom.exit();
  }
};

page.onConsoleMessage = function(msg) {
  return console.log(msg);
};

page.open('chart.html');
